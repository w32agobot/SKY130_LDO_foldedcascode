v {xschem version=3.1.0 file_version=1.2
}
G {}
K {}
V {}
S {}
E {}
T {   Copyright 2022 Manuel Moser

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.} 0 -240 0 0 0.2 0.2 {}
N 460 -1040 460 -1000 {
lab=s}
N 460 -940 460 -900 {
lab=GND}
N 460 -900 640 -900 {
lab=GND}
N 640 -900 640 -880 {
lab=GND}
N 460 -1140 460 -1040 {
lab=s}
N 640 -890 720 -890 {
lab=GND}
N 460 -1180 460 -1140 {
lab=s}
N 460 -1280 460 -1180 {
lab=s}
N 460 -1390 460 -1280 {
lab=s}
N 460 -1600 460 -1390 {
lab=s}
N 640 -1800 640 -1790 {
lab=s}
N 640 -1810 640 -1800 {
lab=s}
N 460 -1810 640 -1810 {
lab=s}
N 460 -1810 460 -1600 {
lab=s}
N 920 -1390 930 -1390 {
lab=#net1}
N 930 -1420 930 -1390 {
lab=#net1}
N 860 -1390 880 -1390 {
lab=#net2}
N 920 -1450 920 -1420 {
lab=#net3}
N 930 -1550 930 -1420 {
lab=#net1}
N 920 -1550 930 -1550 {
lab=#net1}
N 920 -1550 920 -1510 {
lab=#net1}
N 920 -1480 930 -1480 {
lab=#net1}
N 860 -1480 880 -1480 {
lab=#net2}
N 860 -1480 860 -1390 {
lab=#net2}
N 860 -1390 860 -1350 {
lab=#net2}
N 860 -1290 860 -1270 {
lab=GND}
N 920 -1360 920 -1240 {
lab=Vrefgate}
N 930 -1550 1060 -1550 {
lab=#net1}
N 1060 -1550 1060 -1330 {
lab=#net1}
N 920 -810 1060 -810 {
lab=GND}
N 720 -970 720 -950 {
lab=g}
N 630 -970 640 -970 {
lab=GND}
N 640 -1290 640 -1280 {
lab=#net4}
N 680 -1390 690 -1390 {
lab=Vrefgate}
N 690 -1390 690 -970 {
lab=Vrefgate}
N 680 -1320 690 -1320 {
lab=Vrefgate}
N 630 -1390 640 -1390 {
lab=GND}
N 630 -1320 640 -1320 {
lab=GND}
N 630 -1320 630 -970 {
lab=GND}
N 640 -1010 640 -1000 {
lab=#net5}
N 680 -1040 690 -1040 {
lab=Vrefgate}
N 630 -1040 640 -1040 {
lab=GND}
N 640 -1080 640 -1070 {
lab=#net6}
N 630 -1110 640 -1110 {
lab=GND}
N 680 -1110 690 -1110 {
lab=Vrefgate}
N 680 -1180 690 -1180 {
lab=Vrefgate}
N 640 -1150 640 -1140 {
lab=#net7}
N 630 -1180 640 -1180 {
lab=GND}
N 640 -1220 640 -1210 {
lab=#net8}
N 680 -1250 690 -1250 {
lab=Vrefgate}
N 630 -1250 640 -1250 {
lab=GND}
N 630 -1390 630 -1320 {
lab=GND}
N 640 -1360 640 -1350 {
lab=#net9}
N 640 -1570 640 -1560 {
lab=#net10}
N 680 -1670 690 -1670 {
lab=Vrefgate}
N 680 -1600 690 -1600 {
lab=Vrefgate}
N 630 -1670 640 -1670 {
lab=GND}
N 630 -1600 640 -1600 {
lab=GND}
N 680 -1460 690 -1460 {
lab=Vrefgate}
N 640 -1430 640 -1420 {
lab=#net11}
N 630 -1460 640 -1460 {
lab=GND}
N 640 -1500 640 -1490 {
lab=#net12}
N 680 -1530 690 -1530 {
lab=Vrefgate}
N 630 -1530 640 -1530 {
lab=GND}
N 630 -1670 630 -1600 {
lab=GND}
N 640 -1640 640 -1630 {
lab=#net13}
N 690 -1460 690 -1390 {
lab=Vrefgate}
N 690 -1530 690 -1460 {
lab=Vrefgate}
N 690 -1600 690 -1530 {
lab=Vrefgate}
N 690 -1670 690 -1600 {
lab=Vrefgate}
N 630 -1600 630 -1530 {
lab=GND}
N 630 -1530 630 -1460 {
lab=GND}
N 630 -1460 630 -1390 {
lab=GND}
N 640 -940 640 -900 {
lab=GND}
N 630 -970 630 -900 {
lab=GND}
N 690 -1000 700 -1000 {
lab=Vrefgate}
N 680 -970 690 -970 {
lab=Vrefgate}
N 640 -1790 640 -1700 {
lab=s}
N 920 -930 930 -930 {
lab=GND}
N 920 -860 930 -860 {
lab=GND}
N 930 -980 930 -860 {
lab=GND}
N 920 -1070 930 -1070 {
lab=GND}
N 920 -1000 930 -1000 {
lab=GND}
N 930 -1000 930 -980 {
lab=GND}
N 930 -1070 930 -1000 {
lab=GND}
N 920 -1110 920 -1100 {
lab=#net14}
N 870 -930 880 -930 {
lab=Vrefgate}
N 870 -930 870 -860 {
lab=Vrefgate}
N 870 -1000 870 -930 {
lab=Vrefgate}
N 870 -1000 880 -1000 {
lab=Vrefgate}
N 870 -1070 870 -1000 {
lab=Vrefgate}
N 870 -1070 880 -1070 {
lab=Vrefgate}
N 920 -1040 920 -1030 {
lab=#net15}
N 920 -970 920 -960 {
lab=#net16}
N 920 -900 920 -890 {
lab=#net17}
N 870 -1140 880 -1140 {
lab=Vrefgate}
N 920 -1140 930 -1140 {
lab=GND}
N 930 -1140 930 -1070 {
lab=GND}
N 920 -830 920 -810 {
lab=GND}
N 920 -1180 920 -1170 {
lab=Vrefgate}
N 870 -1220 870 -1140 {
lab=Vrefgate}
N 870 -1220 910 -1220 {
lab=Vrefgate}
N 910 -1220 920 -1220 {
lab=Vrefgate}
N 870 -860 880 -860 {
lab=Vrefgate}
N 920 -1240 920 -1220 {
lab=Vrefgate}
N 700 -1000 790 -1000 {
lab=Vrefgate}
N 930 -860 930 -810 {
lab=GND}
N 920 -1220 920 -1180 {
lab=Vrefgate}
N 790 -1000 870 -1000 {
lab=Vrefgate}
N 1060 -1270 1060 -810 {
lab=GND}
N 870 -1140 870 -1070 {
lab=Vrefgate}
C {devices/title.sym} 170 -40 0 0 {name=l1 author="Manuel Moser"}
C {devices/vsource.sym} 460 -970 0 0 {name=VSD value=50m}
C {devices/vsource.sym} 720 -920 0 0 {name=VGS value=0.5}
C {devices/gnd.sym} 640 -880 0 0 {name=l2 lab=GND}
C {devices/simulator_commands.sym} 210 -1030 0 0 {name=COMMANDS
simulator=ngspice
only_toplevel=false 
value="
.temp 27

.save all
.save @m.xm1.msky130_fd_pr__pfet_01v8_lvt[Vth] 
.save @m.xm1.msky130_fd_pr__pfet_01v8_lvt[gm] 

.control
set num_threads=12
dc VSD 0 200m 1m
plot (vrefgate)
plot (70m/(-i(vsd)))
plot (-i(vsd))
plot @m.xm1.msky130_fd_pr__pfet_01v8_lvt[gm] 

op
write pmos_power_transistor_tb.raw
print v(@m.xm1.msky130_fd_pr__pfet_01v8_lvt[Vth]) 

.endc
"}
C {sky130_fd_pr/corner.sym} 100 -1030 0 0 {name=CORNER only_toplevel=false corner=tt}
C {devices/lab_wire.sym} 460 -1140 0 0 {name=p1 sig_type=std_logic lab=s}
C {devices/lab_wire.sym} 720 -970 0 0 {name=p2 sig_type=std_logic lab=g}
C {sky130_fd_pr/pfet_01v8_lvt_nf.sym} 900 -1390 0 0 {name=MP3
L=8
W=0.55
nf=1
mult=1
ad="'int((nf+1)/2) * W / nf * 0.29'"
pd="'2*int((nf+1)/2) * (W / nf + 0.29)'"
as="'int((nf+2)/2) * W / nf * 0.29'"
ps="'2*int((nf+2)/2) * (W / nf + 0.29)'"
nrd="'0.29 / W '" nrs="'0.29 / W '"
sa=0 sb=0 sd=0
model=pfet_01v8_lvt
spiceprefix=X
}
C {sky130_fd_pr/pfet_01v8_lvt_nf.sym} 900 -1480 0 0 {name=MP6
L=8
W=0.55
nf=1
mult=1
ad="'int((nf+1)/2) * W / nf * 0.29'"
pd="'2*int((nf+1)/2) * (W / nf + 0.29)'"
as="'int((nf+2)/2) * W / nf * 0.29'"
ps="'2*int((nf+2)/2) * (W / nf + 0.29)'"
nrd="'0.29 / W '" nrs="'0.29 / W '"
sa=0 sb=0 sd=0
model=pfet_01v8_lvt
spiceprefix=X
}
C {devices/vsource.sym} 860 -1320 0 0 {name=VGS1 value=1}
C {devices/gnd.sym} 860 -1270 0 0 {name=l3 lab=GND}
C {devices/vsource.sym} 1060 -1300 0 0 {name=VGS2 value=1.8}
C {devices/gnd.sym} 990 -810 0 0 {name=l4 lab=GND}
C {devices/lab_wire.sym} 760 -1000 2 0 {name=p12 sig_type=std_logic lab=Vrefgate}
C {sky130_fd_pr/nfet_01v8_lvt_nf.sym} 660 -970 0 1 {name=MN5
L=4
W=1
nf=1
mult=1
ad="'int((nf+1)/2) * W / nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W / nf + 0.29)'"
as="'int((nf+2)/2) * W / nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W / nf + 0.29)'"
nrd="'0.29 / W '" nrs="'0.29 / W '"
sa=0 sb=0 sd=0
model=nfet_01v8_lvt
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8_lvt_nf.sym} 660 -1320 0 1 {name=MN6
L=4
W=1
nf=1
mult=1
ad="'int((nf+1)/2) * W / nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W / nf + 0.29)'"
as="'int((nf+2)/2) * W / nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W / nf + 0.29)'"
nrd="'0.29 / W '" nrs="'0.29 / W '"
sa=0 sb=0 sd=0
model=nfet_01v8_lvt
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8_lvt_nf.sym} 660 -1390 0 1 {name=MN9
L=4
W=1
nf=1
mult=1
ad="'int((nf+1)/2) * W / nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W / nf + 0.29)'"
as="'int((nf+2)/2) * W / nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W / nf + 0.29)'"
nrd="'0.29 / W '" nrs="'0.29 / W '"
sa=0 sb=0 sd=0
model=nfet_01v8_lvt
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8_lvt_nf.sym} 660 -1040 0 1 {name=MN10
L=4
W=1
nf=1
mult=1
ad="'int((nf+1)/2) * W / nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W / nf + 0.29)'"
as="'int((nf+2)/2) * W / nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W / nf + 0.29)'"
nrd="'0.29 / W '" nrs="'0.29 / W '"
sa=0 sb=0 sd=0
model=nfet_01v8_lvt
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8_lvt_nf.sym} 660 -1110 0 1 {name=MN11
L=4
W=1
nf=1
mult=1
ad="'int((nf+1)/2) * W / nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W / nf + 0.29)'"
as="'int((nf+2)/2) * W / nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W / nf + 0.29)'"
nrd="'0.29 / W '" nrs="'0.29 / W '"
sa=0 sb=0 sd=0
model=nfet_01v8_lvt
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8_lvt_nf.sym} 660 -1180 0 1 {name=MN12
L=4
W=1
nf=1
mult=1
ad="'int((nf+1)/2) * W / nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W / nf + 0.29)'"
as="'int((nf+2)/2) * W / nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W / nf + 0.29)'"
nrd="'0.29 / W '" nrs="'0.29 / W '"
sa=0 sb=0 sd=0
model=nfet_01v8_lvt
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8_lvt_nf.sym} 660 -1250 0 1 {name=MN13
L=4
W=1
nf=1
mult=1
ad="'int((nf+1)/2) * W / nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W / nf + 0.29)'"
as="'int((nf+2)/2) * W / nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W / nf + 0.29)'"
nrd="'0.29 / W '" nrs="'0.29 / W '"
sa=0 sb=0 sd=0
model=nfet_01v8_lvt
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8_lvt_nf.sym} 660 -1600 0 1 {name=MN7
L=4
W=1
nf=1
mult=1
ad="'int((nf+1)/2) * W / nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W / nf + 0.29)'"
as="'int((nf+2)/2) * W / nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W / nf + 0.29)'"
nrd="'0.29 / W '" nrs="'0.29 / W '"
sa=0 sb=0 sd=0
model=nfet_01v8_lvt
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8_lvt_nf.sym} 660 -1670 0 1 {name=MN8
L=4
W=1
nf=1
mult=1
ad="'int((nf+1)/2) * W / nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W / nf + 0.29)'"
as="'int((nf+2)/2) * W / nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W / nf + 0.29)'"
nrd="'0.29 / W '" nrs="'0.29 / W '"
sa=0 sb=0 sd=0
model=nfet_01v8_lvt
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8_lvt_nf.sym} 660 -1460 0 1 {name=MN14
L=4
W=1
nf=1
mult=1
ad="'int((nf+1)/2) * W / nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W / nf + 0.29)'"
as="'int((nf+2)/2) * W / nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W / nf + 0.29)'"
nrd="'0.29 / W '" nrs="'0.29 / W '"
sa=0 sb=0 sd=0
model=nfet_01v8_lvt
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8_lvt_nf.sym} 660 -1530 0 1 {name=MN15
L=4
W=1
nf=1
mult=1
ad="'int((nf+1)/2) * W / nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W / nf + 0.29)'"
as="'int((nf+2)/2) * W / nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W / nf + 0.29)'"
nrd="'0.29 / W '" nrs="'0.29 / W '"
sa=0 sb=0 sd=0
model=nfet_01v8_lvt
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8_nf.sym} 900 -1070 0 0 {name=M2
L=4
W=1
nf=1 
mult=1
ad="'int((nf+1)/2) * W / nf * 0.29'"
pd="'2*int((nf+1)/2) * (W / nf + 0.29)'"
as="'int((nf+2)/2) * W / nf * 0.29'"
ps="'2*int((nf+2)/2) * (W / nf + 0.29)'"
nrd="'0.29 / W '" nrs="'0.29 / W '"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8_nf.sym} 900 -860 0 0 {name=M3
L=4
W=1
nf=1 
mult=1
ad="'int((nf+1)/2) * W / nf * 0.29'"
pd="'2*int((nf+1)/2) * (W / nf + 0.29)'"
as="'int((nf+2)/2) * W / nf * 0.29'"
ps="'2*int((nf+2)/2) * (W / nf + 0.29)'"
nrd="'0.29 / W '" nrs="'0.29 / W '"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8_nf.sym} 900 -930 0 0 {name=M1
L=4
W=1
nf=1 
mult=1
ad="'int((nf+1)/2) * W / nf * 0.29'"
pd="'2*int((nf+1)/2) * (W / nf + 0.29)'"
as="'int((nf+2)/2) * W / nf * 0.29'"
ps="'2*int((nf+2)/2) * (W / nf + 0.29)'"
nrd="'0.29 / W '" nrs="'0.29 / W '"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8_nf.sym} 900 -1000 0 0 {name=M4
L=4
W=1
nf=1 
mult=1
ad="'int((nf+1)/2) * W / nf * 0.29'"
pd="'2*int((nf+1)/2) * (W / nf + 0.29)'"
as="'int((nf+2)/2) * W / nf * 0.29'"
ps="'2*int((nf+2)/2) * (W / nf + 0.29)'"
nrd="'0.29 / W '" nrs="'0.29 / W '"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8_nf.sym} 900 -1140 0 0 {name=M5
L=4
W=1
nf=1 
mult=1
ad="'int((nf+1)/2) * W / nf * 0.29'"
pd="'2*int((nf+1)/2) * (W / nf + 0.29)'"
as="'int((nf+2)/2) * W / nf * 0.29'"
ps="'2*int((nf+2)/2) * (W / nf + 0.29)'"
nrd="'0.29 / W '" nrs="'0.29 / W '"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
